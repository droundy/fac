all: fac

clean:
	rm -f bigbro/.gitignore bigbro/.lcovrc bigbro/.travis.yml bigbro/LICENSE bigbro/Makefile bigbro/README.md bigbro/Vagrantfile bigbro/bench/du-home.sh bigbro/bench/du-user.sh bigbro/bench/untar.sh bigbro/bench/untar.sh.prep bigbro/bigbro-linux.c bigbro/bigbro-windows.c bigbro/bigbro.h bigbro/build/binary2header.py bigbro/build/cross-windows.sh bigbro/build/linux.sh bigbro/build/windows.py bigbro/configure.fac bigbro/configure.py bigbro/errors.h bigbro/fileaccesses.c bigbro/hashset.h bigbro/linux-proc.h bigbro/realpath.h bigbro/run-tests.py bigbro/run-windows-tests.py bigbro/syscalls/linux.py bigbro/syscalls/linux/syscall_32.tbl bigbro/syscalls/linux/syscall_64.tbl bigbro/tests/__init__.py bigbro/tests/bigbro-wrong-args.py bigbro/tests/bigbro-wrong-args.sh bigbro/tests/broken-symlink.c bigbro/tests/broken-symlink.py bigbro/tests/build-bigbro.py bigbro/tests/build-bigbro.sh bigbro/tests/build-bigbro.sh.prep bigbro/tests/c-truncate.c bigbro/tests/c-truncate.py bigbro/tests/create-many-delete-many.py bigbro/tests/create-many-delete-many.sh bigbro/tests/fopen.c bigbro/tests/fopen.py bigbro/tests/forks.c bigbro/tests/forks.py bigbro/tests/git-clone.py bigbro/tests/git-clone.sh bigbro/tests/helper.py bigbro/tests/kill-child.py bigbro/tests/kill-child.sh bigbro/tests/ln-s.py bigbro/tests/ln-s.sh bigbro/tests/long-path.py bigbro/tests/long-path.sh bigbro/tests/null.c bigbro/tests/null.py bigbro/tests/openat.c bigbro/tests/openat.py bigbro/tests/rename-directory.c bigbro/tests/rename-directory.py bigbro/tests/rename-over-symlink.c bigbro/tests/rename-over-symlink.py bigbro/tests/rename.c bigbro/tests/rename.py bigbro/tests/stat.c bigbro/tests/stat.py bigbro/tests/symlinkat.c bigbro/tests/symlinkat.py bigbro/tests/symlinks.py bigbro/tests/symlinks.sh bigbro/tests/truncate.py bigbro/tests/truncate.sh bigbro/tests/unit/.gitignore bigbro/tests/unit/hashset.c bigbro/tests/unit/hashset.inputs/words bigbro/tests/unit/hashset.minimal/0 bigbro/tests/unit/hashset.minimal/1 bigbro/tests/unit/hashset.minimal/10 bigbro/tests/unit/hashset.minimal/11 bigbro/tests/unit/hashset.minimal/12 bigbro/tests/unit/hashset.minimal/13 bigbro/tests/unit/hashset.minimal/14 bigbro/tests/unit/hashset.minimal/15 bigbro/tests/unit/hashset.minimal/16 bigbro/tests/unit/hashset.minimal/17 bigbro/tests/unit/hashset.minimal/18 bigbro/tests/unit/hashset.minimal/19 bigbro/tests/unit/hashset.minimal/2 bigbro/tests/unit/hashset.minimal/20 bigbro/tests/unit/hashset.minimal/21 bigbro/tests/unit/hashset.minimal/22 bigbro/tests/unit/hashset.minimal/23 bigbro/tests/unit/hashset.minimal/24 bigbro/tests/unit/hashset.minimal/25 bigbro/tests/unit/hashset.minimal/26 bigbro/tests/unit/hashset.minimal/27 bigbro/tests/unit/hashset.minimal/28 bigbro/tests/unit/hashset.minimal/29 bigbro/tests/unit/hashset.minimal/3 bigbro/tests/unit/hashset.minimal/30 bigbro/tests/unit/hashset.minimal/31 bigbro/tests/unit/hashset.minimal/32 bigbro/tests/unit/hashset.minimal/33 bigbro/tests/unit/hashset.minimal/34 bigbro/tests/unit/hashset.minimal/35 bigbro/tests/unit/hashset.minimal/36 bigbro/tests/unit/hashset.minimal/37 bigbro/tests/unit/hashset.minimal/38 bigbro/tests/unit/hashset.minimal/39 bigbro/tests/unit/hashset.minimal/4 bigbro/tests/unit/hashset.minimal/40 bigbro/tests/unit/hashset.minimal/41 bigbro/tests/unit/hashset.minimal/42 bigbro/tests/unit/hashset.minimal/43 bigbro/tests/unit/hashset.minimal/44 bigbro/tests/unit/hashset.minimal/45 bigbro/tests/unit/hashset.minimal/46 bigbro/tests/unit/hashset.minimal/47 bigbro/tests/unit/hashset.minimal/48 bigbro/tests/unit/hashset.minimal/49 bigbro/tests/unit/hashset.minimal/5 bigbro/tests/unit/hashset.minimal/50 bigbro/tests/unit/hashset.minimal/51 bigbro/tests/unit/hashset.minimal/52 bigbro/tests/unit/hashset.minimal/53 bigbro/tests/unit/hashset.minimal/54 bigbro/tests/unit/hashset.minimal/55 bigbro/tests/unit/hashset.minimal/56 bigbro/tests/unit/hashset.minimal/57 bigbro/tests/unit/hashset.minimal/58 bigbro/tests/unit/hashset.minimal/59 bigbro/tests/unit/hashset.minimal/6 bigbro/tests/unit/hashset.minimal/60 bigbro/tests/unit/hashset.minimal/61 bigbro/tests/unit/hashset.minimal/62 bigbro/tests/unit/hashset.minimal/63 bigbro/tests/unit/hashset.minimal/64 bigbro/tests/unit/hashset.minimal/65 bigbro/tests/unit/hashset.minimal/66 bigbro/tests/unit/hashset.minimal/67 bigbro/tests/unit/hashset.minimal/7 bigbro/tests/unit/hashset.minimal/8 bigbro/tests/unit/hashset.minimal/9 bigbro/tests/unit/realpath.c bigbro/tests/unit/realpath.inputs/bin_sh_error bigbro/tests/unit/realpath.inputs/deepdir bigbro/tests/unit/realpath.inputs/home bigbro/tests/unit/realpath.inputs/long-dotdot bigbro/tests/unit/realpath.inputs/subdir2_symlink bigbro/tests/unit/realpath.inputs/tmp_root_symlink bigbro/tests/unit/realpath.inputs/usr bigbro/tests/unit/realpath.inputs/usr_lib_libblass.so bigbro/tests/unit/realpath.inputs/usr_lib_pt_chown bigbro/tests/unit/realpath.inputs/usr_lib_sendmail bigbro/tests/unit/realpath.inputs/usr_share_texmf bigbro/tests/unit/realpath.minimal/0 bigbro/tests/unit/realpath.minimal/1 bigbro/tests/unit/realpath.minimal/10 bigbro/tests/unit/realpath.minimal/11 bigbro/tests/unit/realpath.minimal/12 bigbro/tests/unit/realpath.minimal/13 bigbro/tests/unit/realpath.minimal/14 bigbro/tests/unit/realpath.minimal/15 bigbro/tests/unit/realpath.minimal/16 bigbro/tests/unit/realpath.minimal/17 bigbro/tests/unit/realpath.minimal/18 bigbro/tests/unit/realpath.minimal/19 bigbro/tests/unit/realpath.minimal/2 bigbro/tests/unit/realpath.minimal/20 bigbro/tests/unit/realpath.minimal/21 bigbro/tests/unit/realpath.minimal/22 bigbro/tests/unit/realpath.minimal/23 bigbro/tests/unit/realpath.minimal/24 bigbro/tests/unit/realpath.minimal/25 bigbro/tests/unit/realpath.minimal/26 bigbro/tests/unit/realpath.minimal/27 bigbro/tests/unit/realpath.minimal/28 bigbro/tests/unit/realpath.minimal/29 bigbro/tests/unit/realpath.minimal/3 bigbro/tests/unit/realpath.minimal/30 bigbro/tests/unit/realpath.minimal/31 bigbro/tests/unit/realpath.minimal/32 bigbro/tests/unit/realpath.minimal/33 bigbro/tests/unit/realpath.minimal/34 bigbro/tests/unit/realpath.minimal/35 bigbro/tests/unit/realpath.minimal/36 bigbro/tests/unit/realpath.minimal/37 bigbro/tests/unit/realpath.minimal/38 bigbro/tests/unit/realpath.minimal/39 bigbro/tests/unit/realpath.minimal/4 bigbro/tests/unit/realpath.minimal/40 bigbro/tests/unit/realpath.minimal/41 bigbro/tests/unit/realpath.minimal/42 bigbro/tests/unit/realpath.minimal/43 bigbro/tests/unit/realpath.minimal/5 bigbro/tests/unit/realpath.minimal/6 bigbro/tests/unit/realpath.minimal/7 bigbro/tests/unit/realpath.minimal/8 bigbro/tests/unit/realpath.minimal/9 bigbro/tests/unit/use-afl.py bigbro/tests/vforks.c bigbro/tests/vforks.py bigbro/vagrant/provision-freebsd.sh bigbro/vagrant/provision-trusty.sh bigbro/win32/create_dlls.c bigbro/win32/create_dlls.h bigbro/win32/dll.c bigbro/win32/dll_paths.c bigbro/win32/helper.c bigbro/win32/hooks.c bigbro/win32/hooks.h bigbro/win32/inject.c bigbro/win32/inject.h bigbro/win32/patch.c bigbro/win32/patch.h bigbro/win32/proc.h bigbro/win32/queue.c bigbro/win32/queue.h bigbro/syscalls/linux.h bigbro/bigbro-linux.o build.o clean-all.o environ.o version-identifier.h fac.o files.o git.o lib/intmap.o lib/iterablehash.o lib/listset.o lib/sha1.o mkdir.o targets.o fac

bigbro/.gitignore bigbro/.lcovrc bigbro/.travis.yml bigbro/LICENSE bigbro/Makefile bigbro/README.md bigbro/Vagrantfile bigbro/bench/du-home.sh bigbro/bench/du-user.sh bigbro/bench/untar.sh bigbro/bench/untar.sh.prep bigbro/bigbro-linux.c bigbro/bigbro-windows.c bigbro/bigbro.h bigbro/build/binary2header.py bigbro/build/cross-windows.sh bigbro/build/linux.sh bigbro/build/windows.py bigbro/configure.fac bigbro/configure.py bigbro/errors.h bigbro/fileaccesses.c bigbro/hashset.h bigbro/linux-proc.h bigbro/realpath.h bigbro/run-tests.py bigbro/run-windows-tests.py bigbro/syscalls/linux.py bigbro/syscalls/linux/syscall_32.tbl bigbro/syscalls/linux/syscall_64.tbl bigbro/tests/__init__.py bigbro/tests/bigbro-wrong-args.py bigbro/tests/bigbro-wrong-args.sh bigbro/tests/broken-symlink.c bigbro/tests/broken-symlink.py bigbro/tests/build-bigbro.py bigbro/tests/build-bigbro.sh bigbro/tests/build-bigbro.sh.prep bigbro/tests/c-truncate.c bigbro/tests/c-truncate.py bigbro/tests/create-many-delete-many.py bigbro/tests/create-many-delete-many.sh bigbro/tests/fopen.c bigbro/tests/fopen.py bigbro/tests/forks.c bigbro/tests/forks.py bigbro/tests/git-clone.py bigbro/tests/git-clone.sh bigbro/tests/helper.py bigbro/tests/kill-child.py bigbro/tests/kill-child.sh bigbro/tests/ln-s.py bigbro/tests/ln-s.sh bigbro/tests/long-path.py bigbro/tests/long-path.sh bigbro/tests/null.c bigbro/tests/null.py bigbro/tests/openat.c bigbro/tests/openat.py bigbro/tests/rename-directory.c bigbro/tests/rename-directory.py bigbro/tests/rename-over-symlink.c bigbro/tests/rename-over-symlink.py bigbro/tests/rename.c bigbro/tests/rename.py bigbro/tests/stat.c bigbro/tests/stat.py bigbro/tests/symlinkat.c bigbro/tests/symlinkat.py bigbro/tests/symlinks.py bigbro/tests/symlinks.sh bigbro/tests/truncate.py bigbro/tests/truncate.sh bigbro/tests/unit/.gitignore bigbro/tests/unit/hashset.c bigbro/tests/unit/hashset.inputs/words bigbro/tests/unit/hashset.minimal/0 bigbro/tests/unit/hashset.minimal/1 bigbro/tests/unit/hashset.minimal/10 bigbro/tests/unit/hashset.minimal/11 bigbro/tests/unit/hashset.minimal/12 bigbro/tests/unit/hashset.minimal/13 bigbro/tests/unit/hashset.minimal/14 bigbro/tests/unit/hashset.minimal/15 bigbro/tests/unit/hashset.minimal/16 bigbro/tests/unit/hashset.minimal/17 bigbro/tests/unit/hashset.minimal/18 bigbro/tests/unit/hashset.minimal/19 bigbro/tests/unit/hashset.minimal/2 bigbro/tests/unit/hashset.minimal/20 bigbro/tests/unit/hashset.minimal/21 bigbro/tests/unit/hashset.minimal/22 bigbro/tests/unit/hashset.minimal/23 bigbro/tests/unit/hashset.minimal/24 bigbro/tests/unit/hashset.minimal/25 bigbro/tests/unit/hashset.minimal/26 bigbro/tests/unit/hashset.minimal/27 bigbro/tests/unit/hashset.minimal/28 bigbro/tests/unit/hashset.minimal/29 bigbro/tests/unit/hashset.minimal/3 bigbro/tests/unit/hashset.minimal/30 bigbro/tests/unit/hashset.minimal/31 bigbro/tests/unit/hashset.minimal/32 bigbro/tests/unit/hashset.minimal/33 bigbro/tests/unit/hashset.minimal/34 bigbro/tests/unit/hashset.minimal/35 bigbro/tests/unit/hashset.minimal/36 bigbro/tests/unit/hashset.minimal/37 bigbro/tests/unit/hashset.minimal/38 bigbro/tests/unit/hashset.minimal/39 bigbro/tests/unit/hashset.minimal/4 bigbro/tests/unit/hashset.minimal/40 bigbro/tests/unit/hashset.minimal/41 bigbro/tests/unit/hashset.minimal/42 bigbro/tests/unit/hashset.minimal/43 bigbro/tests/unit/hashset.minimal/44 bigbro/tests/unit/hashset.minimal/45 bigbro/tests/unit/hashset.minimal/46 bigbro/tests/unit/hashset.minimal/47 bigbro/tests/unit/hashset.minimal/48 bigbro/tests/unit/hashset.minimal/49 bigbro/tests/unit/hashset.minimal/5 bigbro/tests/unit/hashset.minimal/50 bigbro/tests/unit/hashset.minimal/51 bigbro/tests/unit/hashset.minimal/52 bigbro/tests/unit/hashset.minimal/53 bigbro/tests/unit/hashset.minimal/54 bigbro/tests/unit/hashset.minimal/55 bigbro/tests/unit/hashset.minimal/56 bigbro/tests/unit/hashset.minimal/57 bigbro/tests/unit/hashset.minimal/58 bigbro/tests/unit/hashset.minimal/59 bigbro/tests/unit/hashset.minimal/6 bigbro/tests/unit/hashset.minimal/60 bigbro/tests/unit/hashset.minimal/61 bigbro/tests/unit/hashset.minimal/62 bigbro/tests/unit/hashset.minimal/63 bigbro/tests/unit/hashset.minimal/64 bigbro/tests/unit/hashset.minimal/65 bigbro/tests/unit/hashset.minimal/66 bigbro/tests/unit/hashset.minimal/67 bigbro/tests/unit/hashset.minimal/7 bigbro/tests/unit/hashset.minimal/8 bigbro/tests/unit/hashset.minimal/9 bigbro/tests/unit/realpath.c bigbro/tests/unit/realpath.inputs/bin_sh_error bigbro/tests/unit/realpath.inputs/deepdir bigbro/tests/unit/realpath.inputs/home bigbro/tests/unit/realpath.inputs/long-dotdot bigbro/tests/unit/realpath.inputs/subdir2_symlink bigbro/tests/unit/realpath.inputs/tmp_root_symlink bigbro/tests/unit/realpath.inputs/usr bigbro/tests/unit/realpath.inputs/usr_lib_libblass.so bigbro/tests/unit/realpath.inputs/usr_lib_pt_chown bigbro/tests/unit/realpath.inputs/usr_lib_sendmail bigbro/tests/unit/realpath.inputs/usr_share_texmf bigbro/tests/unit/realpath.minimal/0 bigbro/tests/unit/realpath.minimal/1 bigbro/tests/unit/realpath.minimal/10 bigbro/tests/unit/realpath.minimal/11 bigbro/tests/unit/realpath.minimal/12 bigbro/tests/unit/realpath.minimal/13 bigbro/tests/unit/realpath.minimal/14 bigbro/tests/unit/realpath.minimal/15 bigbro/tests/unit/realpath.minimal/16 bigbro/tests/unit/realpath.minimal/17 bigbro/tests/unit/realpath.minimal/18 bigbro/tests/unit/realpath.minimal/19 bigbro/tests/unit/realpath.minimal/2 bigbro/tests/unit/realpath.minimal/20 bigbro/tests/unit/realpath.minimal/21 bigbro/tests/unit/realpath.minimal/22 bigbro/tests/unit/realpath.minimal/23 bigbro/tests/unit/realpath.minimal/24 bigbro/tests/unit/realpath.minimal/25 bigbro/tests/unit/realpath.minimal/26 bigbro/tests/unit/realpath.minimal/27 bigbro/tests/unit/realpath.minimal/28 bigbro/tests/unit/realpath.minimal/29 bigbro/tests/unit/realpath.minimal/3 bigbro/tests/unit/realpath.minimal/30 bigbro/tests/unit/realpath.minimal/31 bigbro/tests/unit/realpath.minimal/32 bigbro/tests/unit/realpath.minimal/33 bigbro/tests/unit/realpath.minimal/34 bigbro/tests/unit/realpath.minimal/35 bigbro/tests/unit/realpath.minimal/36 bigbro/tests/unit/realpath.minimal/37 bigbro/tests/unit/realpath.minimal/38 bigbro/tests/unit/realpath.minimal/39 bigbro/tests/unit/realpath.minimal/4 bigbro/tests/unit/realpath.minimal/40 bigbro/tests/unit/realpath.minimal/41 bigbro/tests/unit/realpath.minimal/42 bigbro/tests/unit/realpath.minimal/43 bigbro/tests/unit/realpath.minimal/5 bigbro/tests/unit/realpath.minimal/6 bigbro/tests/unit/realpath.minimal/7 bigbro/tests/unit/realpath.minimal/8 bigbro/tests/unit/realpath.minimal/9 bigbro/tests/unit/use-afl.py bigbro/tests/vforks.c bigbro/tests/vforks.py bigbro/vagrant/provision-freebsd.sh bigbro/vagrant/provision-trusty.sh bigbro/win32/create_dlls.c bigbro/win32/create_dlls.h bigbro/win32/dll.c bigbro/win32/dll_paths.c bigbro/win32/helper.c bigbro/win32/hooks.c bigbro/win32/hooks.h bigbro/win32/inject.c bigbro/win32/inject.h bigbro/win32/patch.c bigbro/win32/patch.h bigbro/win32/proc.h bigbro/win32/queue.c bigbro/win32/queue.h :
	if cd bigbro; then git pull; else git clone https://github.com/droundy/bigbro; fi

bigbro/syscalls/linux.h : bigbro/syscalls bigbro/syscalls/linux.py bigbro/syscalls/linux/syscall_32.tbl bigbro/syscalls/linux/syscall_64.tbl
	cd bigbro && python3 syscalls/linux.py > syscalls/linux.h

bigbro/bigbro-linux.o : bigbro/bigbro-linux.c bigbro/bigbro.h bigbro/errors.h bigbro/hashset.h bigbro/linux-proc.h bigbro/realpath.h bigbro/syscalls/linux.h
	cd bigbro && ${CC-gcc} ${CFLAGS--O2} -Wall -Werror -std=c99 -g -mtune=native -c bigbro-linux.c

build.o : bigbro/bigbro.h build.c build.h environ.h errors.h fac.h lib/iterablehash.h lib/listset.h lib/sha1.h
	gcc ${CFLAGS} -Ibigbro -std=c99 -o build.o -c build.c

clean-all.o : clean-all.c errors.h fac.h lib/iterablehash.h lib/listset.h lib/sha1.h
	gcc ${CFLAGS} -Ibigbro -std=c99 -o clean-all.o -c clean-all.c

environ.o : environ.c environ.h lib/sha1.h
	gcc ${CFLAGS} -Ibigbro -std=c99 -o environ.o -c environ.c

version-identifier.h : .git/HEAD .git/config .git/packed-refs .gitignore .gnupg/pubring.gpg .gnupg/secring.gpg .gnupg/trustdb.gpg .travis.yml COPYING Makefile.linux README.md Vagrantfile bench/bench.py bench/cats.py bench/dependentchains.py bench/generate-plots.py bench/hierarchy.py bench/sleepy.py bugs/parallel-build.sh build.c build.h build/deb.sh build/install.sh build/linux.sh clean-all.c configure.fac configure.py environ.c environ.h errors.h fac.c fac.h files.c generate-version-header.py git.c git.py lib/.gitignore lib/bsdtest.c lib/categorize_bsd_syscalls.py lib/categorized_bsd_syscalls.py lib/darwin-syscalls.py lib/darwin/syscalls.master lib/freebsd-syscalls.py lib/freebsd/syscalls.master lib/gentables.py lib/intmap.c lib/intmap.h lib/iterablehash.c lib/iterablehash.h lib/linux-syscalls.py lib/linux/unistd_32.h lib/linux/unistd_64.h lib/listset.c lib/listset.h lib/master.py lib/posixmodel.c lib/posixmodel.h lib/sha1.c lib/sha1.h mkdir.c run-tests.py targets.c tests/adding-missing-rule.sh tests/assertion-fails.c tests/assertion-fails.sh tests/bad-fac-file.sh tests/broken-latex.sh tests/build-tarball.sh tests/building-fac-from-git.sh tests/cache-handling.sh tests/cache-in-home-as-symlink.sh tests/cached-output-changing.sh tests/can-be-built-things-first.sh tests/changed-input.sh tests/changing-set-of-fac-rules.sh tests/clean-with-git-rules.sh tests/clean.sh tests/command-fails-but-produces-files.sh tests/count-build-steps.sh tests/dependency-chain.sh tests/dependency-cycle.sh tests/dependency.sh tests/duplicate-implicit-outputs.sh tests/duplicate-rule.sh tests/edited-cache.sh tests/enviorment-variables.sh tests/estimate-time.sh tests/explicit-build-arguments.sh tests/facfile-from-failed-command.sh tests/fail-on-two-rules-one-output.sh tests/failing-build-fails.sh tests/failing-build-of-dependency.sh tests/former-dependency-removed.sh tests/generating-facfiles.sh tests/getting-started.py tests/getting-started.sh tests/git-add-missing.sh tests/git-clone-rule.sh tests/git-dir.sh tests/git-implicit-missing.sh tests/help.sh tests/implicit-dependency-removed-and-not-needed.sh tests/implicit-output-in-subdirectory.sh tests/implicit-output-with-existing-files.sh tests/iterable_hash_test.c tests/listset.c tests/log-output.sh tests/lost-dependencies.sh tests/missing-input.sh tests/missing-output-file.sh tests/newly-missing-output.sh tests/nice-error-message-on-missing-file.sh tests/no-fac-file.sh tests/no-pointless-rebuild.sh tests/no-rule-for-explicit-build.sh tests/non-default-depending-on-default.sh tests/non-default-rules.sh tests/one-rule-wait-for-others.sh tests/output-outside-directory.sh tests/persist-after-failure.sh tests/quiet-on-success.sh tests/readdir-handling.sh tests/readdir-subdir.sh tests/readdir.sh tests/rebuild-when-needed.sh tests/rename-repository.sh tests/run-ghc.sh tests/script-generates-two-facfiles.sh tests/separate-git-dir.sh tests/spinner.c tests/stdout-handled.sh tests/stdout-with-error-and-log.sh tests/subtle-rule-generates-varying-stuff.sh tests/symlink-creation.sh tests/symlink-handling.sh vagrant/provision-debian.sh web/.gitignore web/benchmarks.md web/building.md web/docnav.md web/documentation.md web/fac-vs-scons.md web/faq.md web/features.md web/file-format.md web/flags.md web/getting-started.md web/index.md web/introducing-fac.md web/kells-fac-hires.svg web/kells-fac.svg web/mkdown.py web/normalize.scss web/sidebar.md web/signatures.md web/style.scss web/template.html web/todo.md
	python3 generate-version-header.py > version-identifier.h

fac.o : build.h errors.h fac.c fac.h lib/iterablehash.h lib/listset.h lib/sha1.h version-identifier.h
	gcc ${CFLAGS} -Ibigbro -std=c99 -o fac.o -c fac.c

files.o : environ.h errors.h fac.h files.c lib/iterablehash.h lib/listset.h lib/sha1.h
	gcc ${CFLAGS} -Ibigbro -std=c99 -o files.o -c files.c

git.o : errors.h fac.h git.c lib/iterablehash.h lib/listset.h lib/sha1.h
	gcc ${CFLAGS} -Ibigbro -std=c99 -o git.o -c git.c

lib/intmap.o : lib/intmap.c lib/intmap.h
	cd lib && gcc ${CFLAGS} -Ibigbro -std=c99 -o intmap.o -c intmap.c

lib/iterablehash.o : lib/iterablehash.c lib/iterablehash.h
	cd lib && gcc ${CFLAGS} -Ibigbro -std=c99 -o iterablehash.o -c iterablehash.c

lib/listset.o : lib/listset.c lib/listset.h
	cd lib && gcc ${CFLAGS} -Ibigbro -std=c99 -o listset.o -c listset.c

lib/sha1.o : lib/sha1.c lib/sha1.h
	cd lib && gcc ${CFLAGS} -Ibigbro -std=c99 -o sha1.o -c sha1.c

mkdir.o : errors.h fac.h lib/iterablehash.h lib/listset.h lib/sha1.h mkdir.c
	gcc ${CFLAGS} -Ibigbro -std=c99 -o mkdir.o -c mkdir.c

targets.o : fac.h lib/iterablehash.h lib/listset.h lib/sha1.h targets.c
	gcc ${CFLAGS} -Ibigbro -std=c99 -o targets.o -c targets.c

fac : bigbro/bigbro-linux.o build.o clean-all.o environ.o fac.o files.o git.o lib/intmap.o lib/iterablehash.o lib/listset.o lib/sha1.o mkdir.o targets.o
	gcc -o fac fac.o files.o targets.o clean-all.o build.o git.o environ.o mkdir.o bigbro/bigbro-linux.o lib/listset.o lib/iterablehash.o lib/intmap.o lib/sha1.o ${LDFLAGS-} -lpopt -lpthread -lm

